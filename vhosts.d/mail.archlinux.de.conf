server {
	server_name mail.archlinux.de;

	root /srv/http/vhosts/mail.archlinux.de/htdocs;
	access_log /var/log/nginx/mail.archlinux.de-access.log;
	error_log /var/log/nginx/mail.archlinux.de-error.log;

	include hosts.d/archlinux.de.conf;

	location ~ ^/(bin|config|installer|logs|temp|tests|SQL|plugins/enigma/home) {
		deny all;
	}

	location ~ ^/program/(js|resources)/ {
		expires 2M;
	}

	location ~ ^/program/ {
		deny all;
	}

	location = /favicon.ico {
		alias /srv/http/vhosts/mail.archlinux.de/htdocs/skins/larry/images/favicon.ico;
		expires 2M;
	}

	location ~ ^/(skins|program) {
		add_header Cache-Control "public, max-age=2592000";
		expires 2M;
	}

	location ~ \.(jpg|gif|png|css|js|ico)$ {
		expires 2M;
	}

	location ~ \.php$ {
		try_files $uri =404;
		fastcgi_pass unix:/run/php-fpm/mail.socket;
	}
}
